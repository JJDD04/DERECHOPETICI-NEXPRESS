<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Derecho de Petici√≥n ‚Äì Pago con comprobante</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: Arial, sans-serif;
  background: #f2f2f2;
  padding: 20px;
}
.container {
  max-width: 800px;
  margin: auto;
  background: #fff;
  padding: 20px;
  border-radius: 8px;
}
label {
  font-weight: bold;
  margin-top: 15px;
  display: block;
}
input, textarea {
  width: 100%;
  padding: 8px;
  margin-top: 5px;
}
button {
  margin-top: 20px;
  padding: 12px;
  width: 100%;
  font-size: 16px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}
.btn-next { background:#1976d2; color:#fff; }
.btn-generate { background:#2e7d32; color:#fff; }
.hidden { display:none; }
.locked {
  opacity: 0.5;
  pointer-events: none;
}
.box {
  border: 1px solid #ccc;
  padding: 15px;
  margin-top: 20px;
  border-radius: 6px;
  background:#fafafa;
}
</style>
</head>

<body>

<div class="container">
<h1>Derecho de Petici√≥n</h1>

<!-- PANTALLA 1 -->
<div id="pantalla1">
  <label>Nombre completo</label>
  <input id="nombre">

  <label>C√©dula</label>
  <input id="cedula">

  <label>Ciudad</label>
  <input id="ciudad">

  <label>Entidad</label>
  <input id="entidad">

  <label>Describe el problema</label>
  <textarea id="caso" rows="5"></textarea>

  <label>Correo electr√≥nico</label>
  <input id="correo">

  <button class="btn-next" type="button" onclick="irAPago()">
    Continuar al pago
  </button>
</div>

<!-- PANTALLA 2 -->
<div id="pantalla2" class="hidden">

  <div class="box">
    <h3>Realiza el pago</h3>

    <p><b>üíú Nequi</b><br>
    N√∫mero: <b>300 123 4567</b><br>
    Titular: <b>Natalia</b></p>

    <p><b>üè¶ Bancolombia</b><br>
    Cuenta de ahorros: <b>12345678901</b><br>
    Titular: <b>Natalia</b></p>

    <p><b>Valor:</b> $40.000 COP</p>
  </div>

  <div class="box">
    <label>Sube el comprobante de pago</label>
    <input type="file" id="comprobante" accept=".jpg,.png,.pdf"
           onchange="habilitarGenerar()">

    <button id="btnGenerar" class="btn-generate locked"
      type="button" onclick="generarDocumento()">
      Generar derecho de petici√≥n
    </button>

    <p style="font-size:13px;color:#555;">
      El documento se genera una vez cargado el comprobante.
      La revisi√≥n final se realiza tras verificaci√≥n manual.
    </p>
  </div>

</div>

</div>

<script>
function irAPago() {
  const campos = ["nombre","cedula","entidad","caso"];
  for (let id of campos) {
    if (!document.getElementById(id).value.trim()) {
      alert("Completa todos los campos antes de continuar.");
      return;
    }
  }
  document.getElementById("pantalla1").classList.add("hidden");
  document.getElementById("pantalla2").classList.remove("hidden");
}

function habilitarGenerar() {
  const archivo = document.getElementById("comprobante").files.length;
  const btn = document.getElementById("btnGenerar");
  if (archivo > 0) {
    btn.classList.remove("locked");
  }
}

function limpiar(t) {
  return t.trim().replace(/\s+/g," ");
}

function generarDocumento() {
  if (document.getElementById("comprobante").files.length === 0) {
    alert("Debes subir el comprobante de pago.");
    return;
  }

  const nombre = limpiar(nombreEl.value);
  const cedula = cedulaEl.value;
  const ciudad = limpiar(ciudadEl.value);
  const entidad = limpiar(entidadEl.value);
  const caso = limpiar(casoEl.value);
  const correo = correoEl.value;
  const fecha = new Date().toLocaleDateString("es-CO");

  const html = `
<!DOCTYPE html>
<html lang="es">
<meta charset="UTF-8">
<body>
<h2>DERECHO DE PETICI√ìN</h2>
<p>${fecha}</p>
<p>Se√±ores:<br><b>${entidad}</b></p>
<p>
Yo, <b>${nombre}</b>, identificado(a) con c√©dula ${cedula},
domiciliado(a) en ${ciudad}, en ejercicio del art√≠culo 23
de la Constituci√≥n Pol√≠tica y la Ley 1755 de 2015,
presento el siguiente derecho de petici√≥n:
</p>
<p>${caso}</p>
<p>Solicito respuesta al correo: <b>${correo}</b></p>
<p>Atentamente,<br><b>${nombre}</b><br>C.C. ${cedula}</p>
</body>
</html>`;

  const blob = new Blob([html], {type:"application/msword;charset=utf-8"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "Derecho_de_Peticion.doc";
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
}
const nombreEl = document.getElementById("nombre");
const cedulaEl = document.getElementById("cedula");
const ciudadEl = document.getElementById("ciudad");
const entidadEl = document.getElementById("entidad");
const casoEl = document.getElementById("caso");
const correoEl = document.getElementById("correo");
</script>

</body>
</html>


