<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Prueba Derecho de Petici√≥n</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<style>
body { font-family: Arial; background:#f2f2f2; padding:20px; }
.container { max-width:600px; margin:auto; background:#fff; padding:20px; }
.hidden { display:none; }
button { padding:12px; width:100%; margin-top:15px; }
</style>
</head>

<body>

<div class="container">
<h2>Prueba de funcionamiento</h2>

<form id="formulario" novalidate>

<div id="pantalla1">
  <label>Nombre</label>
  <input type="text" name="nombre">

  <button type="button" id="btnPago">Ir a pago</button>
</div>

<div id="pantalla2" class="hidden">
  <label>Link comprobante</label>
  <input type="url" name="link_comprobante">

  <button type="submit">Enviar comprobante</button>
  <p id="estado"></p>
</div>

</form>
</div>

<script>
/* üî• PRUEBA 1: JS CARG√ì */
alert("‚úÖ JavaScript carg√≥ correctamente");

/* INIT EMAILJS */
emailjs.init("jvc-7-lDgJoYTiYQj");

const btnPago = document.getElementById("btnPago");
const pantalla1 = document.getElementById("pantalla1");
const pantalla2 = document.getElementById("pantalla2");
const estado = document.getElementById("estado");

/* üî• PRUEBA 2: BOT√ìN FUNCIONA */
btnPago.addEventListener("click", function () {
  alert("‚û°Ô∏è Click en Ir a pago detectado");
  pantalla1.classList.add("hidden");
  pantalla2.classList.remove("hidden");
});

/* üî• PRUEBA 3: SUBMIT FUNCIONA */
document.getElementById("formulario").addEventListener("submit", function(e) {
  e.preventDefault();
  alert("üì® Submit detectado");

  estado.innerText = "Enviando...";

  emailjs.sendForm(
    "service_a16hrta",
    "template_m8d80fi",
    this
  ).then(
    function() {
      estado.innerText = "‚úÖ Enviado correctamente";
      alert("‚úÖ EmailJS respondi√≥ OK");
    },
    function(error) {
      estado.innerText = "‚ùå Error";
      alert("‚ùå Error EmailJS (ver consola)");
      console.error(error);
    }
  );
});
</script>

</body>
</html>
